#mysql
Хранимая процедура в MySQL - это подготовленный заранее блок кода, который может принимать параметры, выполнять операции в базе данных и возвращать результаты.


Синтаксис создания хранимой процедуры в MySQL выглядит следующим образом:

```sql
CREATE [DEFINER = { user | CURRENT_USER }] PROCEDURE procedure_name ([proc_parameter[, ...]])
BEGIN
    -- тело процедуры, содержащее SQL-запросы и другие команды
END;
```

Где:

- `DEFINER` - опциональный параметр, который указывает, кто создал процедуру. Если не указан, то процедура будет создана с именем текущего пользователя.
- `procedure_name` - имя хранимой процедуры.
- `proc_parameter` - параметры, передаваемые в процедуру. Они могут быть входными (IN), выходными (OUT) или как входные, так и выходные (INOUT).

Пример создания хранимой процедуры, которая возвращает список клиентов по заданному фильтру, может выглядеть так:

```sql
CREATE PROCEDURE get_customers (IN filter VARCHAR(50))
BEGIN
    SELECT * FROM customers WHERE name LIKE CONCAT('%', filter, '%');
END;
```

В этом примере `IN filter` - входной параметр процедуры, который принимает фильтр для поиска клиентов. Внутри процедуры выполняется SQL-запрос на выборку клиентов из таблицы `customers`, используя переданный параметр `filter`. Результат запроса будет возвращен как результат работы процедуры.

Создание хранимой процедуры в MySQL включает несколько шагов:

1. Определите имя процедуры и список ее параметров. Например, следующий код создаст хранимую процедуру с именем `get_customer_info` с одним параметром `customer_id`:

```sql
CREATE PROCEDURE get_customer_info (IN customer_id INT)
```

2. Определите тело процедуры. Это может быть любой допустимый код SQL, включая SELECT, INSERT, UPDATE и DELETE операторы, а также логические выражения и циклы. Например, следующий код выберет информацию о клиенте с заданным идентификатором:

```sql
BEGIN
    SELECT * FROM customers WHERE id = customer_id;
END
```

3. Завершите определение процедуры. Это может включать дополнительные операторы, такие как комментарии или инструкции обработки ошибок. Например, следующий код добавляет комментарий к процедуре:

```sql
COMMENT 'This procedure retrieves customer information'
```

4. Запустите запрос CREATE PROCEDURE, чтобы создать хранимую процедуру в базе данных. Например, следующий код создаст хранимую процедуру с именем `get_customer_info`:

```sql
CREATE PROCEDURE get_customer_info (IN customer_id INT)
BEGIN
    SELECT * FROM customers WHERE id = customer_id;
END;
```

После создания хранимой процедуры вы можете вызвать ее с помощью команды CALL. Например, следующий код вызовет процедуру `get_customer_info` с идентификатором клиента 123:

```sql
CALL get_customer_info(123);
```

Хранимые процедуры могут быть полезны при выполнении сложных операций с базой данных, повторяющихся запросов и обеспечении безопасности и целостности данных. Однако, следует учитывать, что неправильно написанные хранимые процедуры могут негативно сказаться на производительности базы данных и усложнить ее обслуживание.



